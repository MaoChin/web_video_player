<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="">
   <meta name="author" content="OrcasThemes">
   <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
   <title></title>
   <!-- Bootstrap core CSS -->
   <link href="css/bootstrap.css" rel="stylesheet">
   <!-- Custom styles for this template -->
   <link rel="stylesheet" href="css/screen.css">
   <link rel="stylesheet" href="css/animation.css">
   <!--[if IE 7]>

      <![endif]-->
   <link rel="stylesheet" href="css/font-awesome.css">
   <!--[if lt IE 8]>
      <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen, projection">
      <![endif]-->
   <link href="css/lity.css" rel="stylesheet">

   <style>
      [v-cloak] {
         display: none;
      }
   </style>
</head>

<body>
   <div id="video">
      <!-- SINGLE VIDEO -->
      <div id="single-video" class="container-fluid standard-bg">
         <!-- HEADER -->
         <div class="row header-top">
            <div class="col-lg-3 col-md-6 col-sm-5">
               <a class="main-logo" href="#"><img src="img/main-logo.png" class="main-logo" alt="Muvee Reviews"
                     title="Muvee Reviews"></a>
            </div>
            <div class="col-lg-6 hidden-md text-center hidden-sm hidden-xs">
            </div>
            <div class="col-lg-3 col-md-6 col-sm-7 hidden-xs">
               <div class="right-box">
                  <button type="button" class="access-btn" data-toggle="modal"
                     data-target="#enquirypopup">修改视频</button>
               </div>
               <div class="right-box">
                  <button type="button" class="access-btn" data-toggle="modal" v-on:click="delete_video()">删除视频</button>
               </div>
            </div>
         </div>
      </div>
      <!-- MENU -->
      <div class="row home-mega-menu ">
         <div class="col-md-12">
            <nav class="navbar navbar-default">
               <div class="navbar-header">
                  <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".js-navbar-collapse">
                     <span class="sr-only">Toggle navigation</span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                  </button>
               </div>
               <div class="collapse navbar-collapse js-navbar-collapse megabg dropshd ">
                  <ul class="nav navbar-nav">
                     <h2>视频播放</h2>
                  </ul>
                  <ul class="social">
                  </ul>
                  <div class="search-block">
                     <form>
                        <input type="search" placeholder="Search">
                     </form>
                  </div>
               </div>
               <!-- /.nav-collapse -->
            </nav>
         </div>
      </div>
      <!-- SINGLE VIDEO -->
      <div class="row">
         <!-- SIDEBAR -->
         <div class="col-lg-1 col-md-2 hidden-sm hidden-xs">
         </div>
         <!-- SINGLE VIDEO -->
         <div id="single-video-wrapper" class="col-lg-10 col-md-8">
            <div class="row">
               <!-- VIDEO SINGLE POST -->
               <div class="col-lg-14 col-md-12 col-sm-12">
                  <!-- POST L size -->
                  <article class="post-video">
                     <!-- VIDEO INFO -->
                     <div class="video-info">
                        <!-- 16:9 aspect ratio -->
                        <div class="embed-responsive embed-responsive-16by9 video-embed-box">
                           <iframe v-bind:src="video.video" class="embed-responsive-item"></iframe>
                        </div>
                        <h2 class="title main-head-title" v-cloak>{{video.name}}</h2>
                        <div class="metabox">
                           <span class="meta-i">
                              <i class="fa fa-thumbs-up" aria-hidden="true"></i>20.895
                           </span>
                           <span class="meta-i">
                              <i class="fa fa-thumbs-down" aria-hidden="true"></i>3.981
                           </span>
                           <span class="meta-i">
                              <i class="fa fa-user"></i><a href="#" class="author" title="John Doe">LuckyDog</a>
                           </span>
                           <span class="meta-i">
                              <i class="fa fa-clock-o"></i>October 16. 2023
                           </span>
                           <span class="meta-i">
                              <i class="fa fa-eye"></i>1,347,912 views
                        </div>
                     </div>
                     <div class="clearfix spacer"></div>
                     <!-- DETAILS -->
                     <div class="video-content">
                        <h2 class="title main-head-title">视频简介</h2>
                        <p v-cloak>
                           {{video.info}}
                        </p>
                     </div>
                     <div class="clearfix spacer"></div>
                     <!-- MAIN ROLL ADVERTISE BOX -->
                  </article>
               </div>
            </div>
         </div>
      </div>
      <!-- CHANNELS -->
      <div id="channels-block" class="container-fluid channels-bg">
      </div>
      <!-- FOOTER -->
      <div id="footer" class="container-fluid footer-background">
         <div class="container">
            <footer>
               <!-- SECTION FOOTER -->
               <div class="row">
                  <!-- SOCIAL -->
                  <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                     <div class="row auto-clear">
                     </div>
                  </div>
                  <!-- LINKS -->
                  <div class="row copyright-bottom text-center">
                     <div class="col-md-12 text-center">
                        <a href="" class="footer-logo" title="Video Magazine Bootstrap HTML5 template">
                           <img src="img/footer-logo.png" class="img-responsive text-center"
                              alt="Video Magazine Bootstrap HTML5 template">
                        </a>
                        <p v-cloak>CopyLeft &copy; 2023. Author By {{author}}</p>
                     </div>
                  </div>
            </footer>
         </div>
      </div>

      <!-- MODAL -->
      <div id="enquirypopup" class="modal fade in " role="dialog">
         <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content row">
               <div class="modal-header custom-modal-header">
                  <button type="button" class="close" data-dismiss="modal"></button>
                  <h2 class="icon"><i class="fa fa-television" aria-hidden="true"></i>修改视频</h2>
               </div>
               <div class="modal-body">
                  <form name="info_form"  action="#">
                     <div class="form-group col-sm-12">
                        <input type="text" name="name" placeholder="请输入修改后的视频名称" v-model="video.name">
                     </div>
                     <div class="form-group col-sm-12">
                        <input type="text" name="info" placeholder="请输入修改后的视频简介" v-model="video.info">
                     </div>
                     <div class="form-group col-sm-12">
                        <button class="subscribe-btn pull-right" v-on:click.prevent="update_video()"
                           title="Subscribe">提交</button>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
<!-- JAVA SCRIPT -->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery-1.12.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/lity.js"></script>
<script>
   $(".nav .dropdown").hover(function () {
      $(this).find(".dropdown-toggle").dropdown("toggle");
   });
</script>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
   let app = new Vue({
      el: '#video',
      data: {
         author: "LuckyDog",
         video: {},
      },
      methods: {
         get_param: function (name) {
            // 获取视频id
            return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.href) || [, ""])[1].replace(/\+/g, '%20')) || null
         },
         get_video: function () {
            var id = this.get_param("id");
            // 构建 url请求
            $.ajax({
               url: "/video/" + id,
               type: "get",
               context: this,
               success: function (result, status, xhr) {
                  this.video = result;
               }
            })
         },
         update_video: function () {
            $.ajax({
               url: "/video/" + this.video.id,
               type: "put",
               data: JSON.stringify(this.video),
               context: this,
               success: function (result, status, xhr) {
                  alert("修改视频信息成功");
                  window.location.reload();
               }
            })
         },
         delete_video: function () {
            $.ajax({
               url: "/video/" + this.video.id,
               type: "delete",
               context: this,
               success: function (result, status, xhr) {
                  alert("删除视频成功");
                  window.location.href = "index.html";
               }
            })
         }
      }
   });
   // 调用函数
   app.get_video();
</script>

</html>